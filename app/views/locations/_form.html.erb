<%= form_with(model: location, local: true, class: '') do |form| %>

  <%= form.hidden_field :latitude %>
  <%= form.hidden_field :longitude %>

  <%= render 'shared/error_messages', resource: location %>

  <div id="map_canvas"></div>

  <div class="field">
    <%= form.text_field :name, placeholder: "Name", required: true %>
  </div>

  <% if show_description %>
    <div class="field">
      <%= form.text_area :description, placeholder: "Description" %>
    </div>
  <% end %>

  <%= form.fields_for :items do |item_form| %>
    <div class="field">
      <% if item_form.object.image.attached? %>
        <%= image_tag item_form.object.image_urls[:thumb], class: 'field__thumb' %>
      <% end %>
      <%= item_form.file_field :image %>
    </div>

    <div class="field">
      <%= item_form.text_field :name, placeholder: "Name", required: true %>
    </div>

    <div class="field">
      <%= item_form.text_field :price, placeholder: "Price", required: true %>
    </div>

    <div class="field">
      <%= item_form.text_area :description, placeholder: "Description" %>
    </div>
  <% end %>

  <div class="actions">
    <%= form.submit action_label %>
  </div>

<% end %>

<!--
  TODO add js to:
  - set a pin to your current location on the map
  - delete an item by hiding it and setting deleted field 
  - if there is no thumbnail, then image is required
  - button to duplicate the last item, similar to cacoon
-->
